"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[893],{9280:function(e,a,t){t.d(a,{Hk:function(){return i},J7:function(){return u},VM:function(){return l},gK:function(){return s},yK:function(){return o}});var r=t(3076),n=t(5739);function o(e){return r.Z.post("/api/frees",e,n.np).then((({data:{data:e}})=>e)).catch((({response:{data:{errorFields:e,errorMessage:a}}})=>{throw{data:e,message:a}}))}function l(e){return r.Z.get("/api/frees",{params:e}).then((({data:{data:e}})=>e)).catch((({response:{data:{errorMessage:e}}})=>{throw{message:e}}))}function u(e){return r.Z.get(`/api/frees/${e}`).then((({data:{data:e}})=>e)).catch((({response:{data:{errorMessage:e}}})=>{throw{message:e}}))}function s(e,a){return r.Z.put(`/api/frees/${e}`,a,n.np).then((()=>e)).catch((({response:{data:{errorMessage:e}}})=>{throw{message:e}}))}function i(e){return r.Z.delete(`/api/frees/${e}`).then((()=>{})).catch((({response:{data:{errorMessage:e}}})=>{throw{message:e}}))}},6950:function(e,a,t){t.d(a,{K:function(){return n}});t(6229),t(7330),t(2062);var r=t(3076);function n(e){return r.Z.get(`/api/file/board/${e}`).then((({data:{data:e}})=>e)).catch((({response:{data:{errorMessage:e}}})=>{throw{message:e}}))}},156:function(e,a,t){function r(e,a){for(const t in e)e[t]=a[t]}t.d(a,{M:function(){return r}})},3952:function(e,a,t){t.r(a),t.d(a,{default:function(){return j}});t(7658);var r=t(3396),n=t(4870),o=t(5082),l=t(4761),u=t(2384),s=t(3795),i=t(1379),c=t(4909),d=t(399),v=t(2308),f=t(6950),p=t(2483),m=t(9280),g=t(5739),h=t(7474),b=t(65),y=t(6212),Z=t(4231),C=t(1037),W=t(156),I=t(7050);const w={class:"update-container"},F={class:"update-category-container"},H={class:"update-category-input-container"},_={class:"update-title-container"},V={class:"update-title-input-container"},M={class:"update-content-container"},T={class:"update-content-input-container"},U={class:"update-file-container"},q={class:"update-file-input-container"},S={name:"FreeUpdate"};var k=Object.assign(S,{setup(e){const a=(0,b.oR)(),t=(0,p.yj)(),S=(0,p.tv)(),k=(0,n.iH)({categoryId:"",boardTitle:"",boardContent:""}),K=(0,n.iH)({categoryId:"",boardTitle:"",boardContent:"",saveFiles:""}),$=(0,n.iH)({}),j=(0,n.iH)([]),D=(0,n.iH)({}),E=(0,n.iH)([]),J=(0,n.iH)([]);async function O(){D.value=(0,I.C)(t.query);try{const e=t.params.boardId,[a,r,n]=await Promise.all([(0,f.K)(e),(0,m.J7)(e),(0,h.A)(g.E6)]);E.value=a,$.value=r,j.value=n,(0,W.M)(k.value,$.value)}catch({message:e}){console.error(e)}}async function A(){if(!x()&&!(0,y.wu)($.value.userId))return!1;try{const e=Y(),r=await(0,m.gK)(t.params.boardId,e);a.commit("boardFileStore/clearFile"),S.push({path:`/frees/${r}`,query:D.value})}catch({data:e,message:r}){for(const a in e)K.value[a]=e[a];console.error(r)}}function P(e){J.value.push(e),E.value=E.value.filter((a=>a.fileId!==e))}function R(){S.push({path:"/frees",query:D.value})}function Y(){const e=new FormData;for(const a in k.value)e.append(a,k.value[a]);a.getters["boardFileStore/getSaveFiles"].forEach((a=>{e.append("saveFiles",a)}));for(const a of J.value)e.append("deleteFiles",a);return e}function x(){K.value.boardTitle=(0,c.uq)(k.value.boardTitle),K.value.boardContent=(0,c.ty)(k.value.boardContent),K.value.categoryId=(0,c.Hm)(k.value.categoryId);for(const e of Object.values(K.value))if(e)return console.log(e),!1;return!0}return O(),(e,a)=>((0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(Z.Z),(0,r.Wm)(o.Z,{title:"자유게시판"}),(0,r._)("div",w,[(0,r._)("div",F,[(0,r.Wm)(l.Z,{name:"분류",class:"board-form-title-category"}),(0,r._)("div",H,[(0,r.Wm)(u.Z,{modelValue:k.value.categoryId,"onUpdate:modelValue":a[0]||(a[0]=e=>k.value.categoryId=e),onChange:a[1]||(a[1]=e=>K.value.categoryId=(0,n.SU)(c.Hm)(k.value.categoryId)),"category-list":j.value,class:"update-category"},null,8,["modelValue","category-list"]),(0,r.Wm)(s.Z,{"error-msg":K.value.categoryId},null,8,["error-msg"])])]),(0,r._)("div",_,[(0,r.Wm)(l.Z,{name:"제목",class:"board-form-title-title"}),(0,r._)("div",V,[(0,r.Wm)(i.Z,{modelValue:k.value.boardTitle,"onUpdate:modelValue":a[2]||(a[2]=e=>k.value.boardTitle=e),onChange:a[3]||(a[3]=e=>K.value.boardTitle=(0,n.SU)(c.uq)(k.value.boardTitle)),placeholder:"제목을 입력해 주세요.",class:"update-title"},null,8,["modelValue"]),(0,r.Wm)(s.Z,{"error-msg":K.value.boardTitle},null,8,["error-msg"])])]),(0,r._)("div",M,[(0,r.Wm)(l.Z,{name:"내용",class:"board-form-title-content"}),(0,r._)("div",T,[(0,r.Wm)(d.Z,{modelValue:k.value.boardContent,"onUpdate:modelValue":a[4]||(a[4]=e=>k.value.boardContent=e),onChange:a[5]||(a[5]=e=>K.value.boardContent=(0,n.SU)(c.uq)(k.value.boardContent)),class:"update-content"},null,8,["modelValue"]),(0,r.Wm)(s.Z,{"error-msg":K.value.boardContent},null,8,["error-msg"])])]),(0,r._)("div",U,[(0,r.Wm)(l.Z,{required:!1,name:"첨부",class:"board-form-title-file"}),(0,r._)("div",q,[(0,r.Wm)(v.Z,{onDeleteFile:P,"is-update":!0,"file-list":E.value},null,8,["file-list"]),(0,r.Wm)(s.Z,{"error-msg":K.value.saveFiles},null,8,["error-msg"])])]),(0,r.Wm)(C.Z,{onUpdate:A,onCancel:R,"form-type":"update"})])],64))}}),K=t(89);const $=(0,K.Z)(k,[["__scopeId","data-v-4c8e441e"]]);var j=$}}]);
//# sourceMappingURL=893.7254c3cf.js.map