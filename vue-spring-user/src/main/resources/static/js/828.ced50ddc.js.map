{"version":3,"file":"js/828.ced50ddc.js","mappings":"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","sources":["webpack://frontend/./src/api/board/galleryService.js","webpack://frontend/./src/views/board/gallery/GalleryRegister.vue","webpack://frontend/./src/views/board/gallery/GalleryRegister.vue?a5b9"],"sourcesContent":["import axios from \"@/api/config/axios\";\r\nimport {MULTIPART_CONFIG} from \"@/constants\";\r\n\r\n/**\r\n * 갤러리를 등록합니다.\r\n * @param formData 등록 폼\r\n * @return {Promise<number>} 등록된 게시글 번호를 반환하거나,\r\n * data: 에러필드에 에러메시지가 담겨진 객체를 반환합니다.\r\n * message: API 통신 에러메시지\r\n */\r\nexport function registerGallery (formData) {\r\n  return axios.post('/api/galleries', formData, MULTIPART_CONFIG)\r\n      .then(({data: {data}}) => {\r\n        return data;\r\n      })\r\n      .catch(({response: {data: {errorFields, errorMessage}}}) => {\r\n        throw {\r\n          data: errorFields,\r\n          message: errorMessage,\r\n        }\r\n      });\r\n}\r\n\r\n/**\r\n * 갤러리 목록을 조회합니다.\r\n * @param condition 검색조건\r\n * @returns {Promise<Array>} 갤러리 목록이 배열로 반환됩니다.\r\n */\r\nexport function getGalleryList(condition) {\r\n  return axios.get('/api/galleries', {\r\n    params: condition\r\n  })\r\n      .then(({data: {data}}) => {\r\n        return data;\r\n      })\r\n      .catch(({response: {data: {errorMessage}}}) => {\r\n        throw {\r\n          message: errorMessage\r\n        }\r\n      });\r\n}\r\n\r\n/**\r\n * 갤러리 상세정보를 조회합니다.\r\n * @param boardId 갤러리 번호\r\n * @return\r\n */\r\nexport function getGalleryDetail(boardId) {\r\n  return axios.get(`/api/galleries/${boardId}`)\r\n      .then(({data: {data}}) => {\r\n        return data;\r\n      })\r\n      .catch(({response: {data: {errorMessage}}}) => {\r\n        throw {\r\n          message: errorMessage\r\n        }\r\n      });\r\n}\r\n\r\n/**\r\n * 갤러리를 업데이트합니다.\r\n * @param boardId 갤러리 번호\r\n * @param formData 업데이트폼 정보\r\n * @return {Promise<number>} 갤러리 번호\r\n */\r\nexport function updateGallery(boardId, formData) {\r\n  return axios.put(`/api/galleries/${boardId}`, formData, MULTIPART_CONFIG)\r\n      .then(() => {\r\n        return boardId;\r\n      })\r\n      .catch(({response: {data: {errorMessage}}}) => {\r\n        throw {\r\n          message: errorMessage\r\n        }\r\n      });\r\n}\r\n\r\n/**\r\n * 갤러리를 삭제합니다.\r\n * @param boardId 갤러리 번호\r\n * @return {Promise<void>}\r\n */\r\nexport function deleteGallery(boardId) {\r\n  return axios.delete(`/api/galleries/${boardId}`)\r\n      .then(() => {\r\n      })\r\n      .catch(({response: {data: {errorMessage}}}) => {\r\n        throw {\r\n          message: errorMessage\r\n        };\r\n      });\r\n}","<template>\r\n\r\n  <GNB></GNB>\r\n\r\n  <!-- 타이틀 -->\r\n  <board-title title=\"갤러리\"></board-title>\r\n\r\n  <div class=\"register-container\">\r\n\r\n    <!-- 게시글 카테고리 -->\r\n    <div class=\"register-category-container\">\r\n\r\n      <board-form-title name=\"분류\" class=\"board-form-title-category\"></board-form-title>\r\n\r\n      <div class=\"register-category-input-container\">\r\n        <category-select\r\n            v-model=\"registerForm.categoryId\"\r\n            @change=\"errorFields.categoryId = validateCategory(registerForm.categoryId)\"\r\n            :category-list=\"categoryList\"\r\n            class=\"register-category\">\r\n        </category-select>\r\n        <input-error :error-msg=\"errorFields.categoryId\"></input-error>\r\n      </div>\r\n\r\n    </div>\r\n\r\n    <!-- 게시글 제목 -->\r\n    <div class=\"register-title-container\">\r\n\r\n      <board-form-title name=\"제목\" class=\"board-form-title-title\"></board-form-title>\r\n\r\n      <div class=\"register-title-input-container\">\r\n        <base-input\r\n            v-model=\"registerForm.boardTitle\"\r\n            @change=\"errorFields.boardTitle = validateTitle(registerForm.boardTitle)\"\r\n            placeholder=\"제목을 입력해 주세요.\"\r\n            class=\"register-title\">\r\n        </base-input>\r\n        <input-error :error-msg=\"errorFields.boardTitle\"></input-error>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 게시글 내용 -->\r\n    <div class=\"register-content-container\">\r\n      <board-form-title name=\"내용\" class=\"board-form-title-content\">\r\n      </board-form-title>\r\n      <div class=\"register-content-input-container\">\r\n        <base-textarea\r\n            v-model=\"registerForm.boardContent\"\r\n            @change=\"errorFields.boardContent = validateContent(registerForm.boardContent)\"\r\n            class=\"register-content\">\r\n        </base-textarea>\r\n        <input-error :error-msg=\"errorFields.boardContent\"></input-error>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 첨부 파일 -->\r\n    <div class=\"register-file-container\">\r\n\r\n      <board-form-title\r\n          :required=\"false\"\r\n          name=\"갤러리 이미지\"\r\n          class=\"board-form-title-file\">\r\n      </board-form-title>\r\n\r\n      <div class=\"register-file-input-container\">\r\n        <board-file-list\r\n            @upload-file=\"onUploadFile\"\r\n            :allowed-extensions=\"allowedExtension\">\r\n        </board-file-list>\r\n        <input-error :error-msg=\"errorFields.saveFiles\"></input-error>\r\n      </div>\r\n\r\n    </div>\r\n\r\n    <!-- 등록 폼 -->\r\n    <board-form-btn-container\r\n        @register=\"onRegister\"\r\n        @cancel=\"router.push({path: '/galleries', query: condition})\"\r\n        form-type=\"register\">\r\n    </board-form-btn-container>\r\n\r\n  </div>\r\n\r\n</template>\r\n\r\n<script setup>\r\n/**\r\n * 갤러리 등록 컴포넌트\r\n */\r\n\r\nimport BoardTitle from \"@/components/board/BoardTitle.vue\";\r\nimport BoardFormTitle from \"@/components/board/BoardFormTitle.vue\";\r\nimport BaseInput from \"@/components/base/BaseInput.vue\";\r\nimport InputError from \"@/components/base/BaseInputError.vue\";\r\nimport CategorySelect from \"@/components/CategorySelect.vue\";\r\nimport BaseTextarea from \"@/components/base/BaseTextarea.vue\";\r\nimport {ref} from \"vue\";\r\nimport {createCondition} from \"@/util/queryParamUtil\";\r\nimport {useRoute, useRouter} from \"vue-router\";\r\nimport {GALLERY_CATEGORY_ID} from \"@/constants\";\r\nimport {getCategoryList} from \"@/api/categoryService\";\r\nimport BoardFileList from \"@/components/board/BoardFileList.vue\";\r\nimport {validateCategory, validateContent, validateTitle} from \"@/util/boardValidUtil\";\r\nimport {useStore} from \"vuex\";\r\nimport {registerGallery} from \"@/api/board/galleryService\";\r\nimport GNB from \"@/components/GNB.vue\";\r\nimport BoardFormBtnContainer from \"@/components/board/BoardFormBtnContainer.vue\";\r\nimport {isAuthenticated} from \"@/util/authUtil\";\r\nimport {createFormData} from \"@/util/boardUtil\";\r\n\r\nconst route = useRoute();\r\nconst router = useRouter();\r\nconst store = useStore();\r\n\r\n/* 갤러리 등록정보 */\r\nconst registerForm = ref({\r\n  categoryId: '', /* 카테고리 번호 */\r\n  boardTitle: '', /* 게시글 제목 */\r\n  boardContent: '', /* 게시글 내용 */\r\n})\r\n/* 유효성검증 에러메시지 */\r\nconst errorFields = ref({\r\n  categoryId: '', /* 카테고리 번호 */\r\n  boardTitle: '', /* 게시글 제목*/\r\n  boardContent: '', /* 게시글 내용 */\r\n  saveFiles: '', /* 첨부파일 */\r\n})\r\n\r\nconst categoryList = ref([]); // 카테고리 목록\r\nconst condition = ref({}); // 검색조건\r\nconst saveFiles = ref({}); /* 저장 파일 목록 */\r\nconst allowedExtension = ref(['jpg', 'png']); /* 허용된 파일 확장자 */\r\n\r\ninitGalleryRegister();\r\n\r\n/**\r\n * 갤러리 등록 컴포넌트를 초기화합니다.\r\n */\r\nasync function initGalleryRegister() {\r\n  condition.value = createCondition(route.query, 3);\r\n\r\n  try {\r\n    categoryList.value = await getCategoryList(GALLERY_CATEGORY_ID);\r\n  } catch ({message}) {\r\n    console.error(message);\r\n  }\r\n}\r\n\r\n/**\r\n * 갤러리를 등록합니다.\r\n */\r\nasync function onRegister() {\r\n  if (!validateRegisterForm() || !isAuthenticated()) {\r\n    return false;\r\n  }\r\n\r\n\r\n\r\n  try {\r\n    const formData = createFormData(registerForm.value, saveFiles.value);\r\n\r\n    if (formData.get('saveFiles') === null) {\r\n      alert('이미지를 첨부해주세요.');\r\n\r\n      return false;\r\n    }\r\n\r\n    const freeId = await registerGallery(formData);\r\n\r\n    router.push({\r\n      path: `/galleries/${freeId}`,\r\n      query: condition.value\r\n    })\r\n  } catch ({data, message}) {\r\n    // 유효성검증에 실패한 필드의 에러메시지를 저장합니다.\r\n    for (const field in data) {\r\n      errorFields.value[field] = data[field];\r\n    }\r\n    console.error(message);\r\n  }\r\n}\r\n\r\n/**\r\n * 등록폼을 검증합니다.\r\n * @returns {boolean}\r\n */\r\nfunction validateRegisterForm() {\r\n  errorFields.value.boardTitle = validateTitle(registerForm.value.boardTitle);\r\n  errorFields.value.boardContent = validateContent(registerForm.value.boardContent);\r\n  errorFields.value.categoryId = validateCategory(registerForm.value.categoryId);\r\n\r\n  for (const errorMsg of Object.values(errorFields.value)) {\r\n    if (errorMsg) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  return true;\r\n}\r\n\r\n/**\r\n * 파일 인풋 컴포넌트에서 전송된 파일들을 저장합니다.\r\n *\r\n * @param uploadFiles\r\n */\r\nfunction onUploadFile(uploadFiles) {\r\n  saveFiles.value = uploadFiles\r\n}\r\n\r\n</script>\r\n\r\n<script>\r\nexport default {\r\n  name: \"GalleryRegister\"\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.register-category-container, .register-title-container,\r\n.register-content-container, .register-file-container {\r\n  border-bottom: 1px solid var(--border-color-gray);\r\n  height: 100%;\r\n  display: flex;\r\n}\r\n\r\n.register-category-input-container, .register-title-input-container,\r\n.register-content-input-container, .register-file-input-container {\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  margin: 5px 0 5px 10px;\r\n}\r\n\r\n.register-category-container {\r\n  border-top: 1px solid var(--border-color-gray);\r\n}\r\n\r\n.register-category {\r\n  width: 200px;\r\n}\r\n\r\n.register-title {\r\n  width: 95%;\r\n  height: 40px;\r\n}\r\n\r\n.register-content {\r\n  width: 95%;\r\n  min-height: 200px;\r\n}\r\n\r\n</style>","import script from \"./GalleryRegister.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./GalleryRegister.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./GalleryRegister.vue?vue&type=style&index=0&id=5a981d50&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5a981d50\"]])\n\nexport default __exports__"],"names":["registerGallery","formData","axios","post","MULTIPART_CONFIG","then","data","catch","response","errorFields","errorMessage","message","getGalleryList","condition","get","params","getGalleryDetail","boardId","updateGallery","put","deleteGallery","delete","__default__","name","route","useRoute","router","useRouter","registerForm","useStore","ref","categoryId","boardTitle","boardContent","saveFiles","categoryList","allowedExtension","async","initGalleryRegister","value","createCondition","query","getCategoryList","GALLERY_CATEGORY_ID","console","error","onRegister","validateRegisterForm","isAuthenticated","createFormData","alert","freeId","push","path","field","validateTitle","validateContent","validateCategory","errorMsg","Object","values","onUploadFile","uploadFiles","__exports__"],"sourceRoot":""}